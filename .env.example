# RauskuClaw API
PORT=3001
API_KEY=change-me-please
# Optional multi-key auth model (overrides API_KEY when set):
# API_KEYS_JSON=[{"name":"admin","key":"replace-admin-key","role":"admin"},{"name":"read","key":"replace-read-key","role":"read"}]
# Only for local dev: set to 1 to allow /v1/* without API key.
API_AUTH_DISABLED=0
# Optional custom path for shared config file.
RAUSKUCLAW_CONFIG_PATH=/config/rauskuclaw.json

# SQLite DB path (inside container)
DB_PATH=/data/rauskuclaw.sqlite

# Worker polling interval (ms)
WORKER_POLL_MS=300
# Comma-separated queues this worker can process.
WORKER_QUEUE_ALLOWLIST=default
SCHEDULER_ENABLED=1
SCHEDULER_BATCH_SIZE=5
SCHEDULER_CRON_TZ=UTC

# OpenAI provider (M3)
OPENAI_ENABLED=0
# OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1-mini
OPENAI_BASE_URL=https://api.openai.com
# OpenAI-compatible providers may require a custom path (example: /api/paas/v4/chat/completions)
OPENAI_CHAT_COMPLETIONS_PATH=/v1/chat/completions
OPENAI_TIMEOUT_MS=30000

# Codex OSS provider (M3 phase 1)
CODEX_OSS_ENABLED=0
# Required when CODEX_OSS_ENABLED=1
# CODEX_OSS_MODEL=
# online = uses codex exec + codex login OAuth session, oss = local model mode
CODEX_EXEC_MODE=online
CODEX_OSS_LOCAL_PROVIDER=ollama
CODEX_OSS_TIMEOUT_MS=60000
CODEX_OSS_TRANSIENT_RETRIES=4
CODEX_OSS_TRANSIENT_BACKOFF_MS=750
CODEX_OSS_WORKDIR=/workspace
CODEX_CLI_PATH=codex
WORKSPACE_ROOT=/workspace
WORKSPACE_FILE_VIEW_MAX_BYTES=262144
WORKSPACE_FILE_WRITE_MAX_BYTES=262144
WORKSPACE_UPLOAD_MAX_BYTES=4194304

# Memory semantic search (M4 phase 1)
MEMORY_VECTOR_ENABLED=0
OLLAMA_BASE_URL=http://rauskuclaw-ollama:11434
OLLAMA_EMBED_MODEL=embeddinggemma:300m-qat-q8_0
OLLAMA_EMBED_TIMEOUT_MS=15000
# Required when MEMORY_VECTOR_ENABLED=1
# SQLITE_VECTOR_EXTENSION_PATH=/opt/sqlite-vector/vector0.so
MEMORY_SEARCH_TOP_K_DEFAULT=10
MEMORY_SEARCH_TOP_K_MAX=100
MEMORY_EMBED_QUEUE_TYPE=system.memory.embed.sync

# (MVP) allow deploy targets
DEPLOY_TARGET_ALLOWLIST=staging,prod
# Optional shell-command tool execution (disabled by default, allowlist required)
TOOL_EXEC_ENABLED=0
# TOOL_EXEC_ALLOWLIST=git,node,npm
TOOL_EXEC_TIMEOUT_MS=10000
# Optional safe fetch tool (disabled by default, https + domain allowlist required)
DATA_FETCH_ENABLED=0
# DATA_FETCH_ALLOWLIST=api.github.com,example.com
DATA_FETCH_TIMEOUT_MS=8000
DATA_FETCH_MAX_BYTES=65536
# Workspace file-read tool (enabled by default, path restricted to workspace root)
DATA_FILE_READ_ENABLED=1
DATA_FILE_READ_MAX_BYTES=65536

WEB_SEARCH_ENABLED=0
WEB_SEARCH_PROVIDER=duckduckgo
WEB_SEARCH_TIMEOUT_MS=8000
WEB_SEARCH_MAX_RESULTS=5
# WEB_SEARCH_BASE_URL=https://api.duckduckgo.com
# WEB_SEARCH_BRAVE_API_KEY=replace-with-brave-key
# WEB_SEARCH_BRAVE_ENDPOINT=https://api.search.brave.com/res/v1/web/search

# (Optional) Callback allowlist: comma-separated domains (e.g. dashboard.rausku.com)
# CALLBACK_ALLOWLIST=
# Optional callback request signing (HMAC SHA-256).
CALLBACK_SIGNING_ENABLED=0
# CALLBACK_SIGNING_SECRET=replace-with-long-random-secret
CALLBACK_SIGNING_TOLERANCE_SEC=300

# Runtime metrics + alerts
METRICS_ENABLED=1
METRICS_RETENTION_DAYS=7
ALERT_WINDOW_SEC=3600
ALERT_QUEUE_STALLED_SEC=900
ALERT_FAILURE_RATE_PCT=50
ALERT_FAILURE_RATE_MIN_COMPLETED=20
